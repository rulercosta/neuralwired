{{ $lang := .Get 0 }}
{{ $code := .Inner }}
<div class="code-block">
    <div class="code-header">
        <span class="code-lang">{{ $lang }}</span>
        <button class="copy-button" onclick="copyCode(this)">Copy</button>
    </div>
    <pre><code class="language-{{ $lang }}">{{ $code }}</code></pre>
</div>

<script>
function copyCode(button) {
    const pre = button.parentElement.nextElementSibling;
    const code = pre.querySelector('code');
    const text = code.innerText;

    navigator.clipboard.writeText(text).then(() => {
        button.textContent = 'Copied!';
        setTimeout(() => {
            button.textContent = 'Copy';
        }, 2000);
    });
}
</script>
