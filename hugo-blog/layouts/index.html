{{ define "main" }}
<header>
    <div class="intro-section">
        <h1>neuralwired blog</h1>
        <p>{{ .Site.Params.introduction | default "Welcome to my blog where I write about technology, programming, and more." }}</p>
    </div>
</header>

<main>
    {{ $featured := where .Site.RegularPages "Params.featured" true }}
    {{ if $featured }}
    <section id="featured" class="content-section">
        <h1>featured</h1>
        <div class="featured-posts">
            {{ range first 3 $featured }}
            <article class="featured-post">
                <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                <div class="post-meta">
                    <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
                </div>
                <div class="post-excerpt">
                    {{ if .Params.excerpt }}
                        {{ .Params.excerpt }}
                    {{ else }}
                        {{ .Summary }}
                    {{ end }}
                </div>
                <a href="{{ .Permalink }}" class="read-more">read more →</a>
            </article>
            {{ end }}
        </div>
    </section>
    {{ end }}

    <section id="recent-posts" class="content-section">
        <h1>recent posts</h1>
        <div class="post-list">
            {{ $recentPosts := first 5 (where .Site.RegularPages "Section" "posts") }}
            {{ if $recentPosts }}
                {{ range $recentPosts }}
                <article class="post-item">
                    <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                    <div class="post-meta">
                        <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
                    </div>
                    <div class="post-excerpt">
                        {{ if .Params.excerpt }}
                            {{ .Params.excerpt }}
                        {{ else }}
                            {{ .Summary }}
                        {{ end }}
                    </div>
                    <a href="{{ .Permalink }}" class="read-more">read more →</a>
                </article>
                {{ end }}
                <div class="view-all">
                    <a href="/posts/" class="view-all-link">view all posts →</a>
                </div>
            {{ else }}
                <p class="no-posts">No posts yet.</p>
            {{ end }}
        </div>
    </section>
</main>
{{ end }}
