<!DOCTYPE html>
<html lang="en">
<head>
    {{ partial "head.html" . }}
</head>
<body>
    <header class="site-header" id="header-container">
        {{ partial "header.html" . }}
    </header>

    <div class="container">
        <div id="content-container">
            {{ block "main" . }}{{ end }}
        </div>

        <footer id="footer-container">
            {{ partial "footer.html" . }}
        </footer>
    </div>

    <!-- Theme toggle script - improved to prevent flashing -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Setup theme toggle with no transitions
            const themeToggle = document.querySelector('.theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                });
            }
            
            // No need for theme-initializing class or setTimeout
            // Just ensure everything is loaded before allowing interactions
            document.body.style.visibility = 'visible';
        });
    </script>
</body>
</html>
